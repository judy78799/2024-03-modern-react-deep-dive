

## 2.2 가상 DOM과 리액트 파이버
### DOM과 브라우저 렌더링 과정
#### 브라우저 렌더링
- 주소를 방문해 HTML 파일을 다운로드한다.
- HTML을 파싱해 DOM을 만들고, CSS를 파싱해 CSSOM을 만든다.
- DOM 노드를 순회하며 분석한다.
- 분석한 DOM 노드를 대상으로 해당 노드에 대한 CSSOM 정보를 찾고 발견한 CSS 정보를 노드에 적용한다.
  - 레이아웃 : 화면 어느 좌표에 나타나야 하는지 계산하는 과정
  - 페인팅 : 레이아웃 단계를 거친 노드에 색과 같은 실제 유효한 모습을 그리는 과정
   
#### 가상 DOM의 탄생 배경
- SPA : 하나의 페이지에서 모든 작업이 일어난다. -> 계속해서 요소의 위치를 재계산하기 때문에 비용이 커진다.
- 리액트가 관리하는 가상의 DOM
- 웹페이지가 표시해야 할 DOM을 메모리에 일단 저장 -> 준비 완료됐을 떄 실제 브라우저 DOM에 반영한다.
- 메모리에서 계산하는 과정을 거쳐 렌더링 과정을 최소화 한다.

#### 리액트 파이버
- 개념
  - 리액트에서 관리하는 JS 객체. 파이버 재조정자(fiber reconciler)가 관리한다.  
  - 가상 DOM과 실제 DOM을 비교해 변경 사항을 수집하고, 차이가 있으면 변경과 관련된 정보를 가지고 있는 파이버를 기준으로 화면에 렌더링을 요청한다.
  - 재조정(reconciliation) : 리액트에서 어떤 부분을 새롭게 렌더링 해야하는 지 두 DOM을 비교하는 작업(알고리즘)
- 역할
  - 작업을 작은 단위로 분할하고 쪼갠 뒤, 우선순위를 매긴다.
  - 이러한 작업을 일시 중지하고 나중에 다시 시작할 수 있다.
  - 이전에 했던 작업을 다시 재사용하거나 필요하지 않은 경우에 폐기할 수 있다.
  - 이 모든 과정은 비동기로 일어난다.

